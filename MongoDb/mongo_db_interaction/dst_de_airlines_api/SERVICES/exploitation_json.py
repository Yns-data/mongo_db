import json
from .folder_exploration import get_folder_path_in_env
import os

def create_historic_op_json():
    current_dir = os.path.dirname(os.path.abspath(__file__))
    temp_dir = os.path.join(current_dir, "..", "TEMP")
    file_path = os.path.join(temp_dir, "historic_op_flights.json")
  


    with open(file_path, 'w') as f:
        json.dump({"operationalFlights": []}, f, indent=2)
    print("historic_created")


def create_scheduled_op_json():
    with open('../TEMP/scheduled_op.json', 'w') as f:
        json.dump({}, f)

def create_scheduled_d1_op_json():
        with open('../TEMP/scheduled_d1_op.json', 'w') as f:
            json.dump({}, f)



def is_json(name_file):
    if not name_file.endswith('.json'):
        return False
    else:
        return True


def open_json_by_its_name(name_file):
    folder_path = get_folder_path_in_env()
    file_path = folder_path + name_file
    with open(file_path) as json_file:
        json_file = json.load(json_file)
        return json_file
    

def delete_page_object_in_json(json_file):
    if "page" in json_file:
        try:
            del json_file["page"]
            return json_file
        except TypeError as e:
            print(f"Erreur inattendue avec le fichier {json_file}: {e}")









